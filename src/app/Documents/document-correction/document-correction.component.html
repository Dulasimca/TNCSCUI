<app-header></app-header>
<div class="ui-g-12 ui-md-12 ui-lg-12 content">
  <app-menu *ngIf="canShowMenu"></app-menu>
  <p-panel>
    <p-header>
      <div class="ui-g panel-header">
        <div class="ui-g-4 dashboard">Document Correction</div>
      </div>
    </p-header>
    <div class="ui-g ui-fluid">
      <p-toast position="top-center" key="t-err"></p-toast>
      <div class="ui-g-12 dashboard">
        <div class="ui-g-12 ui-md-3"></div>
        <div class="ui-g-12 ui-md-12" style="border: 1px solid #18c5a9">
          <form #f="ngForm" name="CorrectionSlipForm">
            <div class="ui-g-12 ui-md-12">
              <!-- <div class="ui-g-1"></div> -->
             <div class="ui-g-6 ui-md-2"> 
                <label for="region" class="ui-g-7 label-fontsize dashboard">Region</label>
                <p-dropdown #region name="region" class="ui-g-12 ui-fluid dashboard" [options]="regionOptions" [(ngModel)]="RCode"
                  (onClick)="onSelect('reg', 'click')" (keydown.enter)="onSelect('reg', 'enter')" [showClear]="true"
                  (ngModelChange)="onResetFields('reg')" filter="true" resetFilterOnHide="true" placeholder="-select-">
                  <ng-template let-item pTemplate="selectedItem" required>
                    <span style="vertical-align:middle">{{item.label}}</span>
                  </ng-template>
                </p-dropdown>
              </div>
              <div class="ui-g-6 ui-md-2">
                <label for="godown" class="ui-g-7 label-fontsize dashboard">Godown</label>
                <p-dropdown #godown name="godown" class="ui-g-12 ui-fluid dashboard" [options]="godownOptions" [(ngModel)]="GCode"
                  (onClick)="onSelect('gd', 'click')" (keydown.enter)="onSelect('gd', 'enter')" 
                   filter="true" resetFilterOnHide="true" [showClear]="true" placeholder="-select-" required>
                  <ng-template let-item pTemplate="selectedItem">
                    <span style="vertical-align:middle">{{item.label}}</span>
                  </ng-template>
                </p-dropdown>
              </div>
              <div class="ui-g-6 ui-md-2">
                <label for="type" class="ui-g-7 label-fontsize dashboard">Document Type</label>
                <p-dropdown #docType name="type" class="ui-g-12 ui-fluid dashboard" [options]="docTypeOptions" [(ngModel)]="DocType"
                  (onClick)="onSelect('dt', 'click')" (keydown.enter)="onSelect('dt', 'enter')"
                   filter="true" resetFilterOnHide="true" (ngModelChange)="onResetFields('dt')"
                  [showClear]="true" placeholder="-select-" required>
                  <ng-template let-item pTemplate="selectedItem">
                    <span style="vertical-align:middle">{{item.label}}</span>
                  </ng-template>
                </p-dropdown>
              </div>
              <div class="ui-g-6 ui-md-2">
                <label for="dDate" class="ui-g-7 label-fontsize dashboard">Document Date</label>
                <p-calendar [(ngModel)]="DocDate" class="ui-g-12 ui-fluid dashboard" [maxDate]="maxDate" [showIcon]="true" name="dDate"
                (ngModelChange)="onResetFields('ddate')"  dateFormat="dd/mm/yy" required></p-calendar>
              </div>
                <div class="ui-g-6 ui-md-2" style="margin-top: -4px">
                <label for="docNum" class="label-fontsize-large">Document No.</label>
                <p-dropdown #docNum name="docNum" class="ui-g-12 ui-fluid dashboard" [options]="docNumOptions" [(ngModel)]="DocNo"
                (onClick)="onSelect('dn', 'click')" (keydown.enter)="onSelect('dn', 'enter')"
                [disabled]="(!DocDate || !DocType)" filter="true" resetFilterOnHide="true"
                [showClear]="true" placeholder="-select-" required>
                <ng-template let-item pTemplate="selectedItem">
                  <span style="vertical-align:middle">{{item.label}}</span>
                </ng-template>
              </p-dropdown>
              </div>
              <div class="ui-g-12 ui-md-12 dashboard">
                <div class="ui-g-12 ui-md-6">
                  <label for="reasonText" class="label-fontsize-large">Reason:</label>
                  <textarea name="reasonText" rows="3" cols="110" maxlength="250" pInputTextarea
                  autoResize="true" [(ngModel)]="Reason" required></textarea>
                </div>
            </div>
            <div class="ui-g-8"></div>
            <div class="ui-g-4 ui-md-1 ui-fluid">
              <button pButton type="button" label=View [disabled]="(!GCode || !RCode || !DocDate || !DocType || !DocNo)" 
              (click)="onView()"></button>
            </div>
            <div class="ui-g-4 ui-md-1 ui-fluid">
              <button pButton type="button" label=Clear (click)="onClear()"></button>
            </div>
              <div class="ui-g-4 ui-md-1 ui-fluid">
                <button pButton type="button" [disabled]="(!f.valid)"
                 label=Save (click)="onSave()"></button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </p-panel>
</div>
  <div *ngIf="viewPane" class="ui-g-12 ui-fluid">
    <p-table tabindex="-1" [columns]="CorrectionSlipApproveStatusCols" [(selection)]="selected" [value]="CorrectionSlipApproveStatusData"
     selectionMode="single" [rows]="10" [rowsPerPageOptions]="[10,20,30,40,50,100]" [paginator]="true"
      [responsive]="true" autoLayout="true">
      <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
          <col *ngFor="let col of columns" style="width:80px">
        </colgroup>
      </ng-template>
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th *ngFor="let col of columns">
            {{col.header}}
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
        <tr [pSelectableRow]="rowData">
          <td *ngFor="let col of columns">
            {{rowData[col.field]}}
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>